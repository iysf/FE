<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>懂</title>
</head>
<body>

  <script type="text/javascript">

  // 在使用 IIFE 的时候 注意前面的代码需要加 ;号

  function wait (message) {

    setTimeout( function timer () {

      console.log(message)

    }, 1000 )

  }

  wait("wait: abc")


  // 本质上无论何时何地，如果将函数(访问它们各自的词法作用域)当作第一级的值类型并到处传递，就会看到闭包在这些函数中的应用。在定时器、事件监听器、Ajax请求、跨窗口通信、Web Workers 或者任何其他的异步(或者同步)任务中，只要使用了回调函数，实际上就是在使用闭包。


  // /************************************** IIFE ************************************** /


  // 通常认为 IIFE 是典型的闭包例子，但根据先前对闭包的定义。这个观点好像并不正确。


  var a = 1;

  (function IIFE () {

    // var a = 2

    console.log(a)

  })()

  // 严格来说，IIFE不是闭包是因为，因为并不是在它自身词法作用域以外执行的。它在定义时所在的作用域中执行(而外部作用域，也就是全局作用域持有A)。a是通过普通的词法作用域查找而非闭包发现的。

  </script>

</body>
</html>
