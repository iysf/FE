<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>实质问题</title>
</head>
<body>

  <script type="text/javascript">

  // 闭包
  var a = 1

  function foo () {

    var a = 2

    function bar () {

      console.log(a)

    }

    return bar

  }

  var bar = foo()

  bar()


  // 本来在一个函数执行完毕以后，通常这个函数的作用域会被垃圾回收机制回收掉。但正是因为闭包，这个函数的作用域一直没有被回收掉。闭包是可以阻止这件事情的发生的

  // 那么是谁在使用这个作用域？  从上面的代码来看的话， 是因为  var bar 在始终引用着 foo 返回的函数。 所以 foo 函数内的作用域始终没有被释放掉。

  // 这个函数在定义时的词法作用域以外的地方被调用。闭包使得函数可以继续访问定义时的词法作用域。

  // 注： 不管使用什么手段将内部函数传递到所在的词法作用域以外，它都会持有对原始定义作用域的引用，无论在何处执行这个函数都会使用闭包。


  </script>

</body>
</html>
